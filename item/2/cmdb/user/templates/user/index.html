{% load static %}


<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <link rel="icon" href="{%static 'user:favicon.ico' %}">
    <title>用户显示</title>

    <link href="{% static 'bootstrap-3.3.7-dist/css/bootstrap.min.css' %}" rel="stylesheet">
    <style type="text/css">
        body {
          padding-top: 70px;
        }
    </style>
  </head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="#">CMDB</a>
        </div>

        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">用户管理</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a>当前登录用户是:{{ request.session.user.name }}</a></li>
            <li class="active"><a href="{% url 'user:logout' %}">退出登录</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container">
        <a class="btn btn-primary btn-create-user" href="javascript:void(0);">创建用户</a>
        <br/>
        <br/> 
        <table id="table_user" class="table table-striped table-bordered table-hover table-condensed" >
            <thead>
                <tr>
                    <th>姓名</th>
                    <th>年龄</th>
                    <th>性别</th>
                    <th>联系方式</th>
                    <th>操作1</th>
                    <th>操作2</th>
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                    <tr>
                        <td>{{ user.name }}</td>
                        <td>{{ user.age }}</td>
                        <td>
                            {% if user.sex == 0 %}
                            女
                            {% else %}
                            男
                            {% endif %}
                        </td>
                        <td>{{ user.tel }}</td>
                        <td>
                            <a class="btn btn-xs btn-success" href="{% url 'user:view' %}?uid={{ user.id }}">编辑</a> 
                            {% if request.session.user.id != user.id %}
                            <a class="btn btn-xs btn-danger" href="{% url 'user:delete' %}?uid={{ user.id }}">删除</a> 
                            {% endif %}
                        </td>
                        <td>
                            {% if request.session.user.id == user.id %}
                            <a class="btn btn-xs btn-success" href="{% url 'user:changepass_view' %}?uid={{ user.id }}">修改密码</a> 
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <script  src="{% static 'jquery/jquery.min.js' %}"></script>
    <script  src="{% static 'sweetalert-1.0.1/dist/sweetalert.min.js' %}"></script>
    <script  src="{% static 'bootstrap-3.3.7-dist/js/bootstrap.min.js' %}"></script>
    <script  src="{% static 'DataTables-1.10.15/media/js/jquery.dataTables.min.js' %}"></script>
    <script  src="{% static 'DataTables-1.10.15/media/js/dataTables.bootstrap.min.js' %}"></script>


    <script type="text/javascript">
    jQuery(document).ready(function() {
      
      jQuery('#table_user').DataTable({
          "language": {
              "processing": "处理中...",
              "lengthMenu": "显示 _MENU_ 项结果",
              "zeroRecords": "没有匹配结果",
              "info": "显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项",
              "infoEmpty": "显示第 0 至 0 项结果，共 0 项",
              "infoFiltered": "(由 _MAX_ 项结果过滤)",
              "infoPostFix": "",
              "search": "搜索:",
              "searchPlaceholder": "搜索...",
              "url": "",
              "emptyTable": "表中数据为空",
              "loadingRecords": "载入中...",
              "infoThousands": ",",
              "paginate": {
                "first": "首页",
                "previous": "上页",
                "next": "下页",
                "last": "末页"
              },
              "aria": {
                paginate: {
                    first: '首页',
                    previous: '上页',
                    next: '下页',
                    last: '末页'
                },
                "sortAscending": ": 以升序排列此列",
                "sortDescending": ": 以降序排列此列"
              },
              "decimal": "-",
              "thousands": "."
              }
            
      });

     jQuery('.btn-create-user').on('click', function(){
                jQuery('#dialog-user-create').modal({
                    show: true,
                    backdrop: false,
                    keyboard: false

                });
            });


       });
     </script>
  </body>
</html>
